import requests
from bs4 import BeautifulSoup
from urllib.parse import urlparse
from weasyprint import HTML

url_list = ['https://www.sec.gov/news/press-release/2023-227', 'https://www.sec.gov/litigation/litreleases/lr-25865', 'https://www.sec.gov/enforce/33-11239-s', 'https://www.sec.gov/news/press-release/2023-178?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2023-171', 'https://www.sec.gov/news/press-release/2023-163', 'https://www.sec.gov/news/press-release/2023-143', 'https://www.sec.gov/news/press-release/2023-146', 'https://www.sec.gov/news/press-release/2023-133', 'https://www.sec.gov/news/press-release/2023-102', 'https://www.sec.gov/news/press-release/2023-101', 'https://www.sec.gov/enforce/33-11179-s', 'https://www.sec.gov/news/press-release/2023-78', 'https://www.sec.gov/news/press-release/2023-64', 'https://www.sec.gov/news/press-release/2023-59', 'https://www.sec.gov/litigation/litreleases/2023/lr25659.htm', 'https://www.sec.gov/news/press-release/2023-40', 'https://www.sec.gov/news/press-release/2023-45', 'https://www.sec.gov/news/press-release/2023-34', 'https://www.sec.gov/news/press-release/2023-32', 'https://www.sec.gov/news/press-release/2023-25', 'https://www.sec.gov/litigation/litreleases/2023/lr25634.htm', 'https://www.sec.gov/news/press-release/2023-13', 'https://www.sec.gov/news/press-release/2023-11', 'https://www.sec.gov/news/press-release/2023-7', 'https://www.sec.gov/news/press-release/2023-2', 'https://www.sec.gov/news/press-release/2022-234', 'https://www.sec.gov/litigation/litreleases/2022/lr25599.htm', 'https://www.sec.gov/news/press-release/2022-227', 'https://www.sec.gov/news/press-release/2022-219', 'https://www.sec.gov/news/press-release/2022-201', 'https://www.sec.gov/litigation/litreleases/2022/lr25569.htm', 'https://www.sec.gov/news/press-release/2022-183', 'https://www.sec.gov/litigation/litreleases/2022/lr25547.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2022/lr25537.htm', 'https://www.sec.gov/news/press-release/2022-175', 'https://www.sec.gov/news/press-release/2022-167', 'https://www.sec.gov/litigation/litreleases/2022/lr25506.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2022/lr25468.htm', 'https://www.sec.gov/enforce/33-11089-s', 'https://www.sec.gov/news/press-release/2022-134', 'https://www.sec.gov/news/press-release/2022-127', 'https://www.sec.gov/litigation/litreleases/2022/lr25377.htm', 'https://www.sec.gov/litigation/litreleases/2022/lr25376.htm', 'https://www.sec.gov/news/press-release/2022-81', 'https://www.sec.gov/news/press-release/2022-37?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2022-26', 'https://www.sec.gov/litigation/litreleases/2022/lr25308.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2022-3', 'https://www.sec.gov/news/press-release/2021-248', 'https://www.sec.gov/news/press-release/2021-237', 'https://www.sec.gov/news/press-release/2021-175', 'https://www.sec.gov/litigation/litreleases/2021/lr25198.htm', 'https://www.sec.gov/news/press-release/2021-172', 'https://www.sec.gov/news/press-release/2021-147', 'https://www.sec.gov/news/press-release/2021-145', 'https://www.sec.gov/litigation/litreleases/2021/lr25157.htm', 'https://www.sec.gov/news/press-release/2021-125?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2021-108', 'https://www.sec.gov/litigation/litreleases/2021/lr25117.htm', 'https://www.sec.gov/news/press-release/2021-98', 'https://www.sec.gov/litigation/litreleases/2021/lr25060.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2021/lr25046.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2021/lr25032.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2021-22', 'https://www.sec.gov/enforce/33-10920-order-s', 'https://www.sec.gov/enforce/33-10914-s', 'https://www.sec.gov/news/press-release/2020-341', 'https://www.sec.gov/news/press-release/2020-338', 'https://www.sec.gov/litigation/admin/2020/33-10909.pdf', 'https://www.sec.gov/litigation/litreleases/2020/lr24980.htm', 'https://www.sec.gov/news/press-release/2020-246', 'https://www.sec.gov/enforce/33-10865-s', 'https://www.sec.gov/enforce/33-10853-s', 'https://www.sec.gov/news/press-release/2020-211', 'https://www.sec.gov/news/press-release/2020-207', 'https://www.sec.gov/litigation/litreleases/2020/lr24870.htm', 'https://www.sec.gov/news/press-release/2020-181', 'https://www.sec.gov/news/press-release/2020-145', 'https://www.sec.gov/news/press-release/2020-137', 'https://www.sec.gov/news/press-release/2020-124', 'https://www.sec.gov/litigation/litreleases/2020/lr24829.htm', 'https://www.sec.gov/litigation/litreleases/2020/lr24804.htm', 'https://www.sec.gov/news/press-release/2020-66', 'https://www.sec.gov/news/press-release/2020-42', 'https://www.sec.gov/news/press-release/2020-37', 'https://www.sec.gov/news/press-release/2020-32', 'https://www.sec.gov/litigation/litreleases/2020/lr24723.htm', 'https://www.sec.gov/news/press-release/2019-267', 'https://www.sec.gov/news/press-release/2019-259', 'https://www.sec.gov/news/press-release/2019-212', 'https://www.sec.gov/news/press-release/2019-202', 'https://www.sec.gov/litigation/litreleases/2019/lr24607.htm', 'https://www.sec.gov/news/press-release/2019-181', 'https://www.sec.gov/news/press-release/2019-164', 'https://www.sec.gov/news/press-release/2019-157', 'https://www.sec.gov/enforce/33-10671-s', 'https://www.sec.gov/news/press-release/2019-150', 'https://www.sec.gov/news/press-release/2018-61', 'https://www.sec.gov/news/press-release/2019-87', 'https://www.sec.gov/news/press-release/2019-74', 'https://www.sec.gov/enforce/33-10638-s', 'https://www.sec.gov/news/press-release/2019-72', 'https://www.sec.gov/litigation/admin/2019/33-10624.pdf', 'https://www.sec.gov/news/press-release/2019-15', 'https://www.sec.gov/litigation/admin/2018/33-10582.pdf', 'https://www.sec.gov/news/press-release/2018-268', 'https://www.sec.gov/news/press-release/2018-268', 'https://www.sec.gov/news/press-release/2018-264', 'https://www.sec.gov/news/press-release/2018-264', 'https://www.sec.gov/news/press-release/2018-258', '/news/press-release/2018-232', '/news/press-release/2018-218', '/news/press-release/2018-185', '/news/press-release/2018-186', '/litigation/admin/2018/33-10530.pdf', 'https://www.sec.gov/news/press-release/2018-126', 'https://www.sec.gov/news/press-release/2018-94', 'https://www.sec.gov/news/press-release/2018-53', 'https://www.sec.gov/news/press-release/2018-23', 'https://www.sec.gov/news/press-release/2018-8', 'https://www.sec.gov/news/press-release/2017-227', 'https://www.sec.gov/news/press-release/2017-219', 'https://www.sec.gov/news/press-release/2017-185-0', 'https://www.sec.gov/news/press-release/2017-131', 'https://www.sec.gov/litigation/litreleases/2017/lr23870.htm', 'https://www.sec.gov/litigation/admin/2016/34-78282-s.pdf', 'https://www.sec.gov/litigation/litreleases/2015/lr23415.htm', 'https://www.sec.gov/news/pressrelease/2015-123.html', 'https://www.sec.gov/news/press-release/2014-273', 'https://www.sec.gov/news/press-release/2014-111', 'https://www.sec.gov/news/press-release/2013-132', 'https://www.sec.gov/news/press-release/2022-145?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2017-202', 'https://www.sec.gov/litigation/litreleases/2016/lr23580.htm', 'https://www.sec.gov/litigation/litreleases/2012/lr22333.htm', 'https://www.sec.gov/litigation/litreleases/2012/lr22238.htm', 'https://www.sec.gov/litigation/admin/2023/33-11154.pdf', 'https://www.sec.gov/litigation/litreleases/2022/lr25470.htm', 'https://www.sec.gov/news/press-release/2021-265?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2021-121', 'https://www.sec.gov/news/press-release/2019-1', 'https://www.sec.gov/litigation/litreleases/2016/lr23711.htm', 'https://www.sec.gov/news/pressrelease/2016-256.html', 'https://www.sec.gov/litigation/litreleases/2016/lr23471.htm', 'https://www.sec.gov/news/pressrelease/2015-163.html', 'https://www.sec.gov/news/press-release/2023-33', 'https://www.sec.gov/litigation/litreleases/2022/lr25528.htm', 'https://www.sec.gov/litigation/litreleases/2022/lr25478.htm?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2022-119?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2022/lr25358.htm', 'https://www.sec.gov/news/press-release/2022-58?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2022-1', 'https://www.sec.gov/news/press-release/2021-214', 'https://www.sec.gov/news/press-release/2021-206', 'https://www.sec.gov/news/press-release/2021-122', 'https://www.sec.gov/news/press-release/2021-51?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/litreleases/2021/lr25052.htm', 'https://www.sec.gov/litigation/litreleases/2020/lr24989.htm', 'https://www.sec.gov/news/press-release/2020-61', 'https://www.sec.gov/news/press-release/2018-130', 'https://www.sec.gov/litigation/litreleases/2017/lr23836.htm', 'https://www.sec.gov/news/pressrelease/2016-95.html', 'https://www.sec.gov/litigation/litreleases/2015/lr23401.htm', 'https://www.sec.gov/news/pressrelease/2015-110.html', 'https://www.sec.gov/news/press-release/2023-31', 'https://www.sec.gov/news/press-release/2022-168', 'https://www.sec.gov/news/press-release/2022-131?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2021-169', 'https://www.sec.gov/news/press-release/2021-82', 'https://www.sec.gov/enforce/34-87155-s', 'https://www.sec.gov/news/press-release/2019-171', 'https://www.sec.gov/news/press-release/2018-213', 'https://www.sec.gov/news/pressrelease/2016-112.html', 'https://www.sec.gov/news/pressrelease/2015-202.html', 'https://www.sec.gov/news/press-release/2023-48', 'https://www.sec.gov/news/press-release/2022-79', 'https://www.sec.gov/news/press-release/2021-154?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/news/press-release/2021-102', 'https://www.sec.gov/news/press-release/2018-236', 'https://www.sec.gov/news/press-release/2018-71', 'https://www.sec.gov/news/press-release/2022-208', 'https://www.sec.gov/news/press-release/2021-231', 'https://www.sec.gov/litigation/admin/2021/34-91174.pdf?utm_medium=email&utm_source=govdelivery', 'https://www.sec.gov/litigation/suspensions/2019/34-85739.pdf', 'https://www.sec.gov/news/press-release/2018-242', 'https://www.sec.gov/litigation/suspensions/2018/34-84063.pdf', 'https://www.sec.gov/litigation/suspensions/2018/34-83518.pdf', 'https://www.sec.gov/litigation/suspensions/2018/34-83084.pdf', 'https://www.sec.gov/litigation/suspensions/2018/34-82800.pdf', 'https://www.sec.gov/news/press-release/2018-20', 'https://www.sec.gov/news/press-release/2018-20', 'https://www.sec.gov/news/press-release/2018-20', 'https://www.sec.gov/litigation/suspensions/2018/34-82452.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-82347.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-81639.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-81481.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-81474.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-81367.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-81314.pdf', 'https://www.sec.gov/litigation/suspensions/2017/34-80435.pdf', 'https://www.sec.gov/litigation/suspensions/2014/34-71568.pdf']

import requests
from bs4 import BeautifulSoup
from urllib.parse import urlparse
from weasyprint import HTML
import re

def clean_filename(filename):
    # Remove invalid characters for filenames and replace with underscores
    return re.sub(r'[^a-zA-Z0-9_-]', '_', filename)


for url in url_list:
    # Make a request to the website
    response = requests.get(url)

    # Continue only if the request was successful
    if response.status_code == 200:
        soup = BeautifulSoup(response.text, 'html.parser')

        # Extract title and text content (customize based on HTML structure)
        title_element = soup.find("h1", class_="article-title")
        text_content_element = soup.find("div", class_="layout-main")

        # Check if the elements exist before extracting text
        title = title_element.get_text() if title_element else 'No Title'
        text_content = text_content_element.get_text() if text_content_element else 'No Text Content'

        # Extract the domain name from the URL for the PDF filename
        parsed_url = urlparse(url)
        filename = f'{clean_filename(parsed_url.netloc + parsed_url.path)}.pdf'

        # Create HTML content with formatted text
        html_content = f'<html><body><h1>{title}</h1><p>{text_content}</p></body></html>'

        # Save the HTML content as a PDF using weasyprint
        HTML(string=html_content).write_pdf(filename)

        print(f'PDF saved as {filename}')
    else:
        print(f'Failed to fetch data from {url}')
